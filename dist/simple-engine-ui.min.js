/*! simple-engine-ui - v0.0.1 - 2016-07-27
* https://github.com/apizzimenti/simple-engine-ui#readme
* Copyright (c) 2016 ; Licensed MIT */
"use strict";function Display(a){this.json=a,this.gameWindow=$("#gameWindow"),this.generate()}function adjust(a){a.className="activeItem"}function reset(a){a.forEach(function(a){a.className=""})}function typewriter(a,b,c){var d,e=b.length,f=0;a.innerHTML="",d=window.setInterval(function(){if(a.innerHTML+=b[f],f<e-1)f++;else{if(c){var g=new Event("typewriter_oncomplete");document.dispatchEvent(g)}clearInterval(d)}},50)}function GameWindow(a){var b=this;this.json=a,this.inner={},this.inner.width=Math.ceil(window.innerWidth/1.66),this.inner.height=Math.ceil(window.innerHeight/1.66),this.inner.marginTop=(window.innerHeight-this.inner.height)/4,$(document).ready(function(){b.generateChild(),b.addWindow(),b.control()})}Display.prototype.generate=function(){var a,b=this,c=document.createElement("ul"),d=document.createElement("div"),e=this.json.text;d.className="text",this.gameWindow.append(d),typewriter(d,e),c.className="options activeOpt",this.activeOpt=c,this.json.children&&(this.gameWindow.append(c),document.addEventListener("typewriter_oncomplete",function(){for(var c in b.json.children)a=document.createElement("li"),a.className="optItem",$(".activeOpt").append(a),typewriter(a,c)}),this.cycle())},Display.prototype.cycle=function(){var a=this,b=0,c=document.getElementsByClassName("activeOpt")[0].childNodes,d=0,e=this;this.current=c[0],adjust(this.current),this.keydown=function(f){if(f=f||window.event,b=f.keyCode,38===b||39==b?(d++,d>c.length-1&&(d=0)):37!==b&&40!==b||(d--,d<0&&(d=c.length-1)),a.current=c[d],reset(c),adjust(a.current),13===b){a.activeOpt.className="options";new Display(a.json.children[a.current.innerHTML]);document.removeEventListener("keydown",e.keydown)}},document.addEventListener("keydown",e.keydown)},angular.module("simple-engine",[]);var app=angular.module("simple-engine");app.directive("game",function(a){return{template:'<div id="simple-engine"></div>',link:function(a,b,c){new GameWindow(simpleDom)}}}),GameWindow.prototype.generateChild=function(){this.inner.screen=document.createElement("div"),this.inner.screen.id="gameWindow",this.inner.templateId="#gameWindow"},GameWindow.prototype.addWindow=function(){var a=$("#simple-engine"),b=this.inner.templateId;a.append(this.inner.screen),$(b).css({width:this.inner.width,height:this.inner.height,"margin-top":this.inner.marginTop})},GameWindow.prototype.control=function(){new Display(this.json)};